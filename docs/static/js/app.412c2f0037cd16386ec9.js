webpackJsonp([1],{"0jEL":function(e,t){},"1/oy":function(e,t){},"8dbg":function(e,t){},"9M+g":function(e,t){},Id91:function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),n=a.n(s),o=a("7+uW"),l=a("mvHQ"),r=a.n(l),i=a("fZjL"),u=a.n(i),c=a("KorX"),m=a.n(c),d=a("C/3r"),p=a("mtWM"),v=a.n(p);o.a.filter("humanizer",function(e,t,a){return"SENSOR"==a?0==e?"○":1==e?"●":e:"RELAY"==a&&"TOGGLE"==t?0==e?"DN":1==e?"UP":e:0==e?"OFF":1==e?"ON":e}),o.a.filter("adjuster",function(e,t,a){return"TEMP"==t&&a?e-4:e});var f=null,h=0,b=null,g=0,y=null,E=0;o.a.filter("money",function(e,t){return"cold"==t?(b!=e&&null!=b&&g++,b=e,((454+10*g)/1e3).toFixed(4)+"m3 ( "+5*e+"тг)"):"hot"==t?(y!=e&&null!=y&&E++,y=e,((1095+10*E)/1e3).toFixed(4)+"m3 ("+10*e+"тг)"):"power"==t?(f!=e&&null!=f&&h++,f=e,((15300+1e3*h/3200)/1e3).toFixed(4)+" kW ("+Math.ceil(.1*e)+"тг)"):e}),o.a.filter("unwrap",function(e,t){return e instanceof Array?t.groups[e[0]]?t.groups[e[0]].devices[e[1]-1].value:null:t.groups[e.value[0]]?t.groups[e.value[0]].devices[e.value[1]-1].value:null});var w,R,S={homeid:"bicityseoul",date:null,time:null,groups:{1:{title:"ПЛК",fake:!0,devices:[{name:"Коридор",value:0,type:"SWITCH",subtype:"RELAY",fake:!0},{name:"Зал",value:0,type:"SWITCH",subtype:"RELAY",fake:!0},{name:"Кухня",value:0,type:"SWITCH",subtype:"RELAY",fake:!0},{name:"Сан-узел",value:0,type:"SWITCH",subtype:"RELAY",fake:!0},{name:"Кладовая",value:0,type:"SWITCH",subtype:"RELAY",fake:!0},{name:"Коридор",value:0,type:"SOCKET",subtype:"RELAY",fake:!0},{name:"Зал1",value:0,type:"SOCKET",subtype:"RELAY",fake:!0},{name:"Зал2",value:0,type:"SOCKET",subtype:"RELAY",fake:!0},{name:"Кухня",value:0,type:"SOCKET",subtype:"RELAY",fake:!0},{name:"Bell",value:0,type:"TOGGLE",subtype:"RELAY",fake:!0},{name:"Сирена",value:1,type:"ALARM",subtype:"RELAY",fake:!0},{name:"Bell",value:1,type:"HALL",subtype:"SENSOR",fake:!0},{name:"Коридор",value:0,type:"HALL",subtype:"SENSOR",fake:!0},{name:"Зал",value:0,type:"HALL",subtype:"SENSOR",fake:!0},{name:"Кухня",value:0,type:"HALL",subtype:"SENSOR",fake:!0},{name:"Сан-узел",value:0,type:"HALL",subtype:"SENSOR",fake:!0},{name:"Кладовая",value:0,type:"HALL",subtype:"SENSOR",fake:!0},{name:"Счетчик",value:2,type:"METER",subtype:"POWER",fake:!0}]},2:{fake:!0,title:"Сенсор(Зал)",devices:[{name:"PIR",type:"PIR",subtype:"SENSOR",value:0},{name:"Temp",type:"TEMP",subtype:"METER",value:23},{name:"Humidity",type:"HUMIDITY",subtype:"METER",value:22},{name:"Fire",type:"FIRE",subtype:"SENSOR",value:0},{name:"TV on/off",type:"TV",subtype:"IR",value:0},{name:"AIR on/off",type:"AIR",subtype:"IR",value:0}]},3:{fake:!0,title:"Сенсор(Кухня)",devices:[{name:"PIR",type:"PIR",subtype:"SENSOR",value:0},{name:"Temp",type:"TEMP",subtype:"METER",value:22},{name:"Humidity",type:"HUMIDITY",subtype:"METER",value:28},{name:"Fire",type:"FIRE",subtype:"SENSOR",value:0}]},4:{fake:!0,title:"Сенсор(Санузел)",devices:[{name:"PIR",type:"PIR",subtype:"SENSOR",value:1},{name:"Temp",type:"TEMP",subtype:"METER",value:21},{name:"Humidity",type:"HUMIDITY",subtype:"METER",value:50}]},5:{fake:!0,title:"Сенсор(Коридор)",devices:[{name:"PIR",type:"PIR",subtype:"SENSOR",value:1},{name:"Temp",type:"TEMP",subtype:"METER",value:10},{name:"Humidity",type:"HUMIDITY",subtype:"METER",value:40}]},6:{fake:!0,title:"HUB(Санузел)",devices:[{name:"Задвижка",type:"VALVE",subtype:"RELAY",value:0},{name:"Счетчик гор",type:"WATER COLD",subtype:"METER",value:3},{name:"Счетчик хол",type:"WATER HOT",subtype:"METER",value:2},{name:"Протечка Кухня",type:"LEAK",subtype:"SENSOR",value:0},{name:"Протечка Санузел",type:"LEAK",subtype:"SENSOR",value:0},{name:"Status Valve",type:"VALVE",subtype:"SENSOR",value:0}]}}},k={scan:new Audio("static/audio/scan.mp3"),ready:new Audio("static/audio/ready.mp3"),toggle:new Audio("static/audio/clear.mp3"),update:new Audio("static/audio/update.mp3"),play:function(e){this[e].currentTime=0,this[e].play()}},_=localStorage.getItem("http")||"http://192.168.1.50:3000",T=v.a.create({baseURL:_}),C={name:"app",data:function(){return{user:"ЗЕЛЕННЫЙ КВАРТАЛ",isRooms:!0,dismissCountDown:10,showDoor:null,showAlert:!1,showAlertMessage:null,fullscreen:!1,hideFake:!1,emulateFake:!0,masterState:!0,adaptTemp:!1,tm:null,errortm:null,value:null,ws:{isOpen:!1,start:!1,error:null,message:null,disableDemo:"true"===localStorage.getItem("disableDemo")||!1,autoconnect:"true"===localStorage.getItem("autoconnect")||!1,server:localStorage.getItem("ws")||"ws://192.168.1.50:3000",http:_},data:{homeid:"bicityseoul",date:null,time:null,groups:{}},home:{alarm:[1,7],bell:{value:[1,8],status:[1,12]},meters:[{name:"Хол-Вода",value:[6,2]},{name:"Гор-Вода",value:[6,3]},{name:"Свет",value:[1,18]}],rooms:{HALLAWAY:{name:"Прихожая",light:{value:[1,1],status:[1,13]},pir:[4,1],temp:[4,2],humidity:[4,3]},KITCHEN:{name:"Кухня",light:{value:[1,3],status:[1,15]},pir:[2,1],temp:[2,2],humidity:[2,3],fire:[2,4],tv:[2,5],air:[2,6],leak:[6,4]},HALL:{name:"Зал",light:{value:[1,2],status:[1,14]},pir:[3,1],temp:[3,2],humidity:[3,3]},BATHROOM:{name:"Сан-узел",light:{value:[1,4],status:[1,16]},pir:[5,1],temp:[5,2],humidity:[5,3],leak:[6,5],valve:{value:[6,1],status:[6,6]}},WARDROBE:{name:"Кладовая",light:{value:[1,5],status:[1,17]}}}}}},created:function(){this.demo(),console.log("created",this.ws.autoconnect),this.ws.autoconnect||this.toggleConnect()},watch:{"ws.server":function(e){localStorage.setItem("ws",e)},"ws.http":function(e){localStorage.setItem("http",e),T.setBaseUrl(e)},"ws.disableDemo":function(e){localStorage.setItem("disableDemo",e),e?(R.reset(),window.clearInterval(this.demoInt)):this.demo()},emulateFake:function(e){T.get("/fake/"+e).then(function(e){console.log("toggleFake",e.data)})},masterState:function(e){T.get("/TJ/master/"+e).then(function(e){console.log("toggleMaster",e.data)})},"ws.autoconnect":function(e){localStorage.setItem("autoconnect",e)},"ws.message":function(e){var t=this;k.play("update"),u()(e).forEach(function(a){e[a].devices.forEach(function(e,s){var n=t.data.groups[a].devices[s];n.value=e.value,n.status=e.status})})}},computed:{online:function(){return this.$root.online},status:function(){return this.$root.status},unwrap:function(){var e=this;return function(t){if(e.data.groups[t[0]])if(t instanceof Array){if(e.data.groups[t[0]])return e.data.groups[t[0]].devices[t[1]-1].value}else if(e.data.groups[t.value[0]])return e.data.groups[t.value[0]].devices[t.value[1]-1].value;return""}}},beforeDestroy:function(){window.clearInterval(this.demoInt),this.ws.isOpen&&this.toggleConnect()},methods:{reload:function(){location.reload()},unwrapZ:function(e){return e instanceof Array?this.data.groups[e[0]].devices[e[1]-1].value:this.data.groups[e.value[0]].devices[e.value[1]-1].value},demo:function(){R=new m.a(T,{delayResponse:1e3}).onAny().reply(function(e){return[200,S]})},demoData:function(){var e=this.data.slice(0);e[Math.ceil(2*Math.random())+8]++,e[Math.floor(4*Math.random())]=Math.floor(2*Math.random()),e[Math.floor(3*Math.random())+6]=Math.ceil(100*Math.random()),this.data=e},enter:function(e){var t=e.parentElement.dataset.newvalue,a=e.parentElement.dataset.value;e.parentElement.dataset.value=t,0!=t&&1!=t&&null!=a&&(e.parentElement.dataset.dir=t>a?"up":t<a?"down":"")},leave:function(e){e.parentElement.dataset.dir=""},toggleFullScreen:function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?(document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),this.fullscreen=!0):(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this.fullscreen=!1)},sendAction:function(e,t,a){var s=1==a.value?0:1;console.log("sendAction",e,t,a.value+"->"+s),T.get("/TJ01/set/"+e+"/"+(t+1)+"/"+s).then(function(){}).catch(function(){a.status="error"})},opendDoor:function(){var e=this;T.get("/opendoor").then(function(t){console.log(t),e.showDoor=t.data}).catch(function(){})},down:function(e,t,a){o.a.set(a,"status","progress"),console.log("down",a.status),"TOGGLE"==a.type&&(a.value=!0)},up:function(e,t,a){console.log("up"),"TOGGLE"==a.type&&(a.value=!1)},toggleConfirm:function(e,t,a){console.log("toggleConfirm"),this.devices[e][t].status=null},toggleError:function(e,t,a){console.log("toggleError"),this.devices[e][t].status="error",this.devices[e][t].value=0==a?1:0,this.timeout(e,t)},timeout:function(e,t){var a=this;window.clearTimeout(this.errortm),this.errortm=window.setTimeout(function(){a.devices[e][t].status=null},500)},toggleConnect:function(){var e=this;this.ws.isOpen?(w.close(),this.ws.isOpen=!1,w=null):this.toggleRead().then(function(){w=null,(w=new d.WebSocket(e.ws.server)).addEventListener("open",function(t){e.ws.isOpen=!0,w.send("/")}),w.addEventListener("error",function(t){console.error("error",t),e.ws.error=t,e.ws.isOpen=!1}),w.addEventListener("close",function(t){e.ws.isOpen=!1}),w.addEventListener("message",function(t){(t=JSON.parse(t.data)).alert?(console.log("ALERT",t.alert),e.showAlertMessage=t.alert,e.showAlert=!0):t.master?console.log("MASTER",t.master):e.ws.message=t})})},toggleRead:function(){var e=this;return T.get("/data.json").then(function(t){e.data=t.data})}},components:{}},A=new d.Server("ws://192.168.1.50:3000");window.WebSocket=d.WebSocket,A.on("connection",function(e){function t(e,t){return Math.floor(Math.random()*(t-e+1))+e}window.setInterval(function(){e.send(r()({2:{fake:!0,title:"Сенсор(Зал)",devices:[{name:"PIR",type:"PIR",subtype:"SENSOR",value:t(0,1)},{name:"Temp",type:"TEMP",subtype:"METER",value:t(20,30)},{name:"Humidity",type:"HUMIDITY",subtype:"METER",value:t(1,100)}]}}))},5e3)});var L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:[e.status,e.fullscreen?"nocursor":""],attrs:{id:"app"}},[a("b-navbar",{staticClass:"bd-navbar",attrs:{toggleable:"md",type:"dark"}},[a("b-nav-toggle",{attrs:{target:"nav_collapse"}}),a("b-navbar-brand",{on:{click:function(t){e.showAlert="с 14:00 по 18:00 будут профилактические работы"}}},[a("div",{staticClass:"logo"})]),a("b-navbar-brand",{on:{click:function(t){e.toggleFullScreen()}}},[e._v("SMART HOME")]),a("b-navbar-nav",{staticClass:"ml-2"},[a("b-nav-form",[a("b-button",{attrs:{size:"sm",variant:e.masterState?"":"danger",pressed:e.masterState},on:{"update:pressed":function(t){e.masterState=t}}},[a("i",{staticClass:"fa fa-power-off mr-1"}),e._v(e._s(e.masterState?"Выключить Все":"Снят с охраны"))]),a("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:""},on:{click:e.opendDoor}},[a("i",{staticClass:"fa fa-key"}),e._v(" \nДомофон")])],1)],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{on:{click:function(t){e.isRooms=!e.isRooms}}},[a("span",{class:{"text-success":!e.isRooms,"text-muted":e.isRooms}},[a("i",{staticClass:"fa fa-th"})])]),a("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.communicate",modifiers:{communicate:!0}}]},[a("span",{class:{"text-success":e.ws.isOpen,"text-muted":!e.ws.isOpen}},[a("i",{staticClass:"fa fa-gear"})])]),a("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"settings",expression:"'settings'"}],staticClass:"ml-3"},[e._v("CITY SEOUL ( КВ 51 )")]),a("b-nav-item",{on:{click:e.reload}},[a("i",{staticClass:"fa fa-user"})])],1)],1),a("div",{staticClass:"mx-3 px-2 pt-2",class:{hideFake:e.hideFake}},[e.isRooms?[a("b-card-group",{staticClass:"uyi rooms main",attrs:{deck:""}},[a("b-card",{attrs:{"no-body":""}},[a("b-card-body",[a("b-row",{staticClass:"display p-2"},[a("b-col",{attrs:{cols:"3"}},[a("b-button",{staticClass:"mb-2",class:{"text-enable":e.data.groups[e.home.bell.status[0]]&&e.data.groups[e.home.bell.status[0]].devices[e.home.bell.status[1]-1].value},attrs:{size:"lg"},on:{click:function(t){e.sendAction(e.home.bell.value[0],e.home.bell.value[1]-1,e.data.groups[e.home.bell.value[0]].devices[e.home.bell.value[1]-1])}}},[e._v("Звонок"),e.data.groups[e.home.bell.value[0]]&&e.data.groups[e.home.bell.value[0]].devices[e.home.bell.value[1]-1].value?a("i",{staticClass:"fa fa-bell-slash ml-2"}):a("i",{staticClass:"fa fa-bell ml-2"})]),e.data.groups[e.home.alarm[0]]&&e.data.groups[e.home.alarm[0]].devices[e.home.alarm[1]-1].value?a("b-btn",{staticClass:"text-danger",attrs:{size:"lg"},on:{click:function(t){e.sendAction(e.home.alarm[0],e.home.alarm[1]-1,e.data.groups[e.home.alarm[0]].devices[e.home.alarm[1]-1])}}},[e._v("Сирена"),a("i",{staticClass:"fa fa-bolt ml-2"})]):e._e()],1),a("b-col",{attrs:{cols:"4"}},[a("div",[a("small",[e._v("Горячяя-Вода ")])]),a("div",[a("small",[e._v("Холодная-Вода ")])]),a("div",[a("small",[e._v("Электросчетчик")])]),a("div",[a("small",[e._v("Погода")])])]),a("b-col",{attrs:{cols:"5"}},[a("div",[a("span",{staticClass:"mr-2"},[e._v(e._s(e._f("money")(e._f("unwrap")(e.home.meters[0],e.data),"hot")))])]),a("div",[a("span",{staticClass:"mr-2"},[e._v(e._s(e._f("money")(e._f("unwrap")(e.home.meters[1],e.data),"cold")))])]),a("div",[a("span",{staticClass:"mr-2"},[e._v(e._s(e._f("money")(e._f("unwrap")(e.home.meters[2],e.data),"power")))])]),a("div",[a("small",{staticClass:"mr-2"},[a("i",{staticClass:"fa fa-snowflake-o"})]),a("span",{staticClass:"mr-2"},[e._v("2° ")]),a("small",[e._v("Гололед ")])])])],1)],1)],1)],1),a("b-card-group",{staticClass:"uyi rooms",attrs:{deck:""}},e._l(e.home.rooms,function(t,s){return a("b-card",{key:s,class:{enabled:e.data.groups[t.light.status[0]]&&e.data.groups[t.light.status[0]].devices[t.light.status[1]-1]&&e.data.groups[t.light.status[0]].devices[t.light.status[1]-1].value,toggled:e.data.groups[t.light.value[0]]&&e.data.groups[t.light.value[0]].devices[t.light.value[1]-1].value},attrs:{"no-body":"",align:"center"},on:{click:function(a){e.sendAction(t.light.value[0],t.light.value[1]-1,e.data.groups[t.light.value[0]].devices[t.light.value[1]-1])}}},[a("b-card-header",[t.pir&&e.data.groups[t.pir[0]]&&e.data.groups[t.pir[0]].devices[t.pir[1]-1].value?a("i",{staticClass:"fa fa-user-secret mr-1"}):e._e(),e._v(e._s(t.name))]),a("b-card-body",[a("div",{staticClass:"display pt-3"},[t.temp?a("div",{staticClass:"temp"},[e._v(e._s(e._f("adjuster")(e._f("numeric")(e._f("unwrap")(t.temp,e.data)),"TEMP",e.adaptTemp)))]):e._e(),t.humidity?a("div",{staticClass:"humidity"},[e._v(e._s(e._f("unwrap")(t.humidity,e.data)))]):e._e(),a("div",{staticClass:"sensors text-center"},[t.fire&&e.data.groups[t.fire[0]]&&e.data.groups[t.fire[0]].devices[t.fire[1]-1].value?a("i",{staticClass:"fa fa-fire text-danger mr-1"}):e._e(),t.leak&&e.data.groups[t.leak[0]]&&e.data.groups[t.leak[0]].devices[t.leak[1]-1].value?a("i",{staticClass:"fa fa-tint text-danger mr-1"}):e._e(),t.valve&&e.data.groups[t.valve.status[0]]&&e.data.groups[t.valve.status[0]].devices[t.valve.status[1]-1].value?a("i",{staticClass:"fa fa-ban text-danger mr-1"}):e._e()])])])],1)}))]:[a("b-card-group",{staticClass:"uyi devices",attrs:{deck:""}},[e._l(e.data.groups,function(t,s){return e._l(t.devices,function(n,o){return a("b-card",{key:s+":"+o,class:["hub"+s,n.status,n.type,n.subtype,t.error,t.fake||n.fake?"fake":"",1==n.value?"enabled":"",0==n.value||1==n.value?"":"numeric"],attrs:{"no-body":"",mousedown:"down(s,i,value)",mouseup:"up(s,i,value)",align:"center"},on:{click:function(t){e.sendAction(s,o,n)}}},[a("b-card-header",[e._v(e._s(n.name))]),a("b-card-body",{attrs:{"data-newvalue":n.value}},[a("transition",{attrs:{name:"METER"==n.subtype?"slide-fade":"switch"==n.type?"chuh":"blink",duration:{enter:500},mode:"out-in"},on:{leave:e.leave,enter:e.enter}},["METER"==n.subtype?a("h4",{key:n.value,staticClass:"card-title meters"},[e._v(e._s(e._f("adjuster")(e._f("numeric")(n.value),n.type,e.adaptTemp))+" ")]):a("h4",{key:n.value,staticClass:"card-title"},[e._v(e._s(e._f("humanizer")(n.value,n.type,n.subtype)))])])],1)],1)})})],2)]],2),a("b-modal",{attrs:{id:"settings",title:"BI SERVICE - ALERT","header-text-variant":"danger","no-fade":"","hide-footer":"","hide-backdrop":""},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}},[a("div",{staticClass:"text-center"},[a("h4",[e._v("Внимание! ")]),a("p",[e._v(e._s(e.showAlertMessage))]),a("img",{attrs:{height:"200",src:"static/maintenace.jpg"}})])]),a("b-modal",{attrs:{id:"communicate",title:"Подключение"}},[a("b-form-group",{attrs:{label:"Server"}},[a("b-input-group",[a("b-form-input",{model:{value:e.ws.http,callback:function(t){e.$set(e.ws,"http",t)},expression:"ws.http"}}),a("b-input-group-append",{attrs:{"is-text":""}},[a("span",{staticClass:"mr-2"},[e._v("Disable Demo")]),a("b-form-checkbox",{model:{value:e.ws.disableDemo,callback:function(t){e.$set(e.ws,"disableDemo",t)},expression:"ws.disableDemo"}})],1)],1)],1),a("b-form-group",{attrs:{label:"Server"}},[a("b-input-group",[a("b-form-input",{model:{value:e.ws.server,callback:function(t){e.$set(e.ws,"server",t)},expression:"ws.server"}}),a("b-input-group-append",{attrs:{"is-text":""}},[a("span",{staticClass:"mr-2"},[e._v("Autoconnect")]),a("b-form-checkbox",{model:{value:e.ws.autoconnect,callback:function(t){e.$set(e.ws,"autoconnect",t)},expression:"ws.autoconnect"}})],1)],1)],1),a("b-form-group",{attrs:{label:"Hide Fake",horizontal:""}},[a("b-form-checkbox",{model:{value:e.hideFake,callback:function(t){e.hideFake=t},expression:"hideFake"}}),a("b-form-checkbox",{model:{value:e.emulateFake,callback:function(t){e.emulateFake=t},expression:"emulateFake"}})],1),a("b-form-group",{attrs:{label:"Ajust Temp - 4",horizontal:""}},[a("b-form-checkbox",{model:{value:e.adaptTemp,callback:function(t){e.adaptTemp=t},expression:"adaptTemp"}})],1),e.ws.error?a("p",{staticClass:"text-danger"},[e._v(e._s(e.ws.error))]):e._e(),e.ws.message?a("p",[e._v(e._s(e.ws.message))]):e._e(),a("template",{slot:"modal-footer"},[a("b-btn",{attrs:{variant:e.ws.isOpen?"secondary":"primary"},on:{click:e.toggleConnect}},[e._v(e._s(e.ws.isOpen?"Disconnect":"Connect"))])],1)],2),a("b-alert",{staticClass:"bialert",attrs:{dismissible:"",variant:"danger",show:null!=e.showDoor},on:{dismissed:function(t){e.showDoor=null}}},[e._v("Домофон "),a("a",{staticClass:"alert-link ml-2"},[e._v(e._s(e.showDoor))])])],1)},staticRenderFns:[]};var M=a("VU/8")(C,L,!1,function(e){a("0jEL")},null,null).exports,I=a("e6fC"),O={install:function(e){Object.defineProperty(e.prototype,"$http",{value:v.a})}},x=a("/ocq"),F={name:"animated-number",props:{number:{default:0}},data:function(){return{displayNumber:0,interval:!1}},mounted:function(){console.log("mounted animated number",this.number),this.displayNumber=this.number?this.number:0},watch:{number:function(e){console.log("watch animated number",e),clearInterval(this.interval),null===e||isNaN(e)||e==this.displayNumber||(this.interval=window.setInterval(function(){if(this.displayNumber!=e){var t=(e-this.displayNumber)/2;t=t>=0?Math.ceil(t):Math.floor(t),this.displayNumber=this.displayNumber+t}else clearInterval(this.interval),this.interval=!1}.bind(this),20))}}},N={render:function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"animatedNumber",class:{inprogress:this.interval}},[this._v(this._s(this.displayNumber))])},staticRenderFns:[]},D=a("VU/8")(F,N,!1,null,null,null).exports,H={inprogress:new Audio("static/audio/scan.mp3"),ready:new Audio("static/audio/ready.mp3"),clear:new Audio("static/audio/clear.mp3"),play:function(e){this[e].currentTime=0,this[e].play()}},P={name:"Scale",watch:{realValue:function(e){console.log("value",e),e>0?(this.$root.status="inprogress",this.timeout(2e3)):(window.clearTimeout(this.tmDisplay),this.$root.status="clear")},status:function(e){H.play(e)}},computed:{realValue:function(){if(this.$root.value>=0)return this.$root.value-this.$root.zero},status:function(){return this.$root.status}},data:function(){return{isReady:null,tmDisplay:null}},components:{AnimatedNumber:D},methods:{timeout:function(e){console.log("timeo",e),window.clearTimeout(this.tmDisplay),this.tmDisplay=window.setTimeout(this.clear,e)},clear:function(){console.log("cleared"),this.$root.status="ready"}}},$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"scales p-5"},[t("div",{staticClass:"display p-5 text-right"},[t("div",{staticClass:"value pr-5",class:{"text-muted":0==this.$root.zero}},[t("AnimatedNumber",{attrs:{number:this.realValue}})],1),t("div",{staticClass:"unit"},[this._v("кг")])])])},staticRenderFns:[]};var W=a("VU/8")(P,$,!1,function(e){a("8dbg")},null,null).exports,Y={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"m-5"})},staticRenderFns:[]};var V=a("VU/8")({name:"Settings",data:function(){return{hid:null}},methods:{}},Y,!1,function(e){a("WSMo")},null,null).exports;o.a.use(x.a);var U=new x.a({routes:[{path:"/scale",component:W,meta:{isPublic:!0}},{path:"/settings",component:V,meta:{isPublic:!0}}],linkActiveClass:"active",onError:function(e){console.error("Router Error",e)}}),z=(a("Jmt5"),a("9M+g"),a("ViqS")),j=a.n(z);j.a.localeData().delimiters.thousands=" ",o.a.filter("date",function(e){return e?e.toLocaleString("ru",{year:"numeric",month:"short",day:"numeric"}).initCap():""}),o.a.filter("datetime",function(e){return e?e.toLocaleString("ru",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):""}),o.a.filter("numeric",function(e){return j()(e).format("0,0")}),String.prototype.initCap=function(){return this.toLowerCase().replace("г.","").replace(/(?:^|\s)[a-zа-я]/g,function(e){return e.toUpperCase()})};var G=localStorage.getItem("apiUrl")||"http://192.168.1.10",K=v.a.create({baseURL:G});new m.a(K).onGet("/putToBag").reply(200,{user:"ASEL"}).onAny("/VALVE").reply(function(e){var t=JSON.parse(e.data);return console.log("mock closeBag",t),t.count>0?[200,t]:[400,{error:"Мешок пустой!"}]}).onGet("/SOCKET").reply(200,{user:"ASEL"}).onAny().reply(function(e){return 100*Math.random()>10?[200,{PIR:0,DOOR:0,REEDSWITCH:0,HUMIDITY:"25",TEMP:"21",HALLMETER:"255",POWERMETER:1e3,WATERMETER:800,LEAK:0,LIGHT:1,SOCKET:1,CLAP:0,VALVE:1}]:[400,{error:"Отправление RB508027382SG не найдено!"}]});o.a.use(I.a),o.a.use(O),o.a.config.productionTip=!1,o.a.mixin({methods:{$resetData:function(e){console.log("reset global data =",this.$options.name),n()(this.$data,this.$options.data.call(this)),(null!==e&&e||null==e)&&this.$emit("reset",null)},$_clone:function(e){return n()({},e)},$:function(e){return document.querySelector(e)},$ArrayRemoveElement:function(e,t){var a=e.indexOf(t);-1!==a&&e.splice(a,1)}}}),new o.a({el:"#app",data:function(){return{status:!1,value:0}},created:function(){window.addEventListener("com",this.read)},mounted:function(){},watch:{},beforeDestroy:function(){window.removeEventListener("com",this.read)},router:U,methods:{read:function(e){isNaN(e.detail)?console.error("is not a number"):this.value=e.detail}},render:function(e){return e(M)}})},WSMo:function(e,t){},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.412c2f0037cd16386ec9.js.map